= Platform Engineering - Red Hat Developer Hub

== Module Overview

**Duration:** 15-20 minutes +
**Format:** Dashboard exploration + Demo +
**Audience:** IT Operations, Platform Engineers, Infrastructure Architects

**Workshop Narrative Context:**

We've learned how to:
- Secure workloads with RHACS
- Enforce governance policies
- Monitor compliance

**Now:** How do we **enable developer self-service** while maintaining operational control? How do we reduce repetitive requests and tickets?

== Learning Objectives

By the end of this module, you will be able to:

* Understand what Red Hat Developer Hub (RHDH) is and how it fits into platform operations
* Verify RHDH deployment health and status
* Navigate RHDH resources in OpenShift console and CLI
* Troubleshoot common RHDH issues
* Understand how software templates reduce operational toil

== What is Red Hat Developer Hub?

**Red Hat Developer Hub (RHDH)** is an **enterprise-grade Internal Developer Platform** based on Backstage.

Think of it as: **Your organization's developer self-service portal**

=== The Operations Problem It Solves

**Before RHDH:**

* Developers submit tickets: "Create me a new app with CI/CD"
* Ops manually provisions: namespace, RBAC, quotas, pipeline, git repo
* Process takes days or weeks
* Inconsistent configurations
* Documentation scattered everywhere

**With RHDH:**

* Developer clicks "Create New App" in portal
* Template automatically provisions: namespace, RBAC, quotas, pipeline, git repo
* Process takes minutes
* **Ops-defined golden paths** ensure consistency
* Self-service with governance built-in

=== Key Capabilities

* **Software Catalog** - Unified view of all services, APIs, libraries
* **Software Templates** - Self-service app creation with Ops-approved patterns
* **TechDocs** - Documentation integrated with code
* **Plugins** - Integrate with tools (ArgoCD, Tekton, Jira, etc.)
* **RBAC** - Fine-grained access control
* **API Integration** - Connect to existing systems

== RHDH Architecture (Quick Overview)

RHDH on OpenShift consists of:

* **Backstage Frontend** - Web portal UI
* **Backstage Backend** - API and orchestration layer
* **PostgreSQL Database** - Stores catalog and configuration
* **Plugins** - Extend functionality (Kubernetes, Tekton, ArgoCD, etc.)

All of this was deployed via the **Red Hat Developer Hub Operator** from OperatorHub.

== Part 1: Verify RHDH Deployment

=== Step 1: Check RHDH Pods

Verify the RHDH pods are running:

[source,bash,role="execute"]
----
oc get pods -n backstage
----

You should see:

----
NAME                                       READY   STATUS
backstage-developer-hub-xxxxx              1/1     Running
backstage-psql-developer-hub-0             1/1     Running
----

Check the deployment details:

[source,bash,role="execute"]
----
oc get deployment -n backstage
----

View the Backstage container resources:

[source,bash,role="execute"]
----
oc get deployment backstage-developer-hub -n backstage -o jsonpath='{.spec.template.spec.containers[0].resources}' | python3 -m json.tool
----

=== Step 2: Get the Developer Hub URL

Get the Developer Hub portal URL:

[source,bash,role="execute"]
----
oc get route backstage-developer-hub -n backstage -o jsonpath='https://{.spec.host}'
----

Output:

----
https://backstage-developer-hub-backstage.apps.cluster-GUID.example.com
----

View all routes in the backstage namespace:

[source,bash,role="execute"]
----
oc get routes -n backstage
----

=== Step 3: Access the Portal

1. **Open the Developer Hub URL** in a new browser tab
2. You'll see the **Red Hat Developer Hub** login page
3. Select **Guest** to enter without authentication

image::rhdh-login-page.png[Developer Hub login page]

Click **Enter** under Guest to access the portal.

You're now in the **Developer Hub Portal**.

image::rhdh-home-page.png[Developer Hub home page]

== Part 2: Populate the Catalog with Demo Templates

The portal is empty because no software templates or catalog entries have been registered. Let's import the **official Red Hat Developer Hub demo templates**.

=== Step 4: Register Official Templates

1. In the Developer Hub portal, click **Create** in the left sidebar
2. You'll see an empty "Golden Path Templates" page
3. Click **Register Existing Component** (or the "+" icon)
4. Enter the following URL:

----
https://github.com/redhat-developer/red-hat-developer-hub-software-templates/blob/48056c57dbfcdcf2a7075819745b0203d1a8a42e/templates.yaml
----

5. Click **Analyze**
6. You'll see it found multiple templates (Go, Node.js, Quarkus, Spring Boot, ArgoCD, Tekton, etc.)
7. Click **Import**

image::rhdh-import-templates.png[Importing official Red Hat templates]

=== Step 5: Explore the Templates

After import, click **Create** again. You'll now see available templates:

* **Quarkus Backend** - Java microservice with Quarkus
* **Spring Boot Backend** - Java microservice with Spring
* **Node.js Backend** - JavaScript/TypeScript service
* **Go Backend** - Go microservice
* **ArgoCD** - GitOps application setup
* **Tekton** - CI/CD pipeline templates

image::rhdh-templates-available.png[Available software templates]

Click on any template to see:

* **Description** - What the template creates
* **Input parameters** - What information is needed
* **Actions** - What happens when executed (create repo, deploy to OpenShift, etc.)

=== Step 6: Walk Through a Template (Read-Only)

Click on the **Quarkus Backend** template to explore it:

1. Review the input fields (name, description, owner, etc.)
2. Notice how Ops has pre-defined the structure - developers just fill in blanks
3. Click **Back** (don't execute - this is just exploration)

**Key insight for Ops:** These templates are YAML files stored in Git. You control what templates are available, what parameters are exposed, and what gets created.

== Part 3: Ops Management Tasks

=== Step 7: View RHDH Resources in OpenShift

In the OpenShift console:

1. Go to **Workloads** -> **Pods**
2. Select the **backstage** project
3. You'll see `backstage-developer-hub` and `backstage-psql-developer-hub` pods

View via CLI:

[source,bash,role="execute"]
----
oc get pods -n backstage
----

[source,bash,role="execute"]
----
oc get deployment -n backstage
----

=== Step 8: Check Configuration

RHDH configuration is stored in ConfigMaps:

[source,bash,role="execute"]
----
oc get configmaps -n backstage
----

View secrets (database credentials, OAuth tokens):

[source,bash,role="execute"]
----
oc get secrets -n backstage
----

=== Step 9: View Logs and Health

Check application logs:

[source,bash,role="execute"]
----
oc logs -n backstage -l rhdh.redhat.com/app=backstage-developer-hub --tail=30
----

Check health endpoint:

[source,bash,role="execute"]
----
curl -sk $(oc get route backstage-developer-hub -n backstage -o jsonpath='https://{.spec.host}')/.backstage/health/v1/readiness
----

You should see `{"status":"ok"}`.

=== Step 10: Resource Usage

[source,bash,role="execute"]
----
oc adm top pods -n backstage
----

== Summary: How RHDH Fits into Ops Workflow

[cols="1,2"]
|===
|Ops Activity |How RHDH Helps

|**Developer requests new app**
|Self-service via templates, no manual provisioning

|**Onboarding new team**
|Portal provides discoverability, no scattered docs

|**Enforcing standards**
|Templates bake in security, quotas, monitoring

|**Tracking all services**
|Catalog provides single source of truth

|**Compliance auditing**
|See which apps follow which patterns

|**Reducing toil**
|Automation via templates and plugins
|===

**Key operational commands:**

[source,bash]
----
# View RHDH pods
oc get pods -n backstage

# Check Backstage CR status
oc get backstage -n backstage

# View application logs
oc logs -n backstage -l rhdh.redhat.com/app=backstage-developer-hub --tail=50

# Check health endpoint
curl -sk $(oc get route backstage-developer-hub -n backstage -o jsonpath='https://{.spec.host}')/.backstage/health/v1/readiness

# View configuration
oc get configmaps -n backstage

# Restart after config changes
oc rollout restart deployment/backstage-developer-hub -n backstage
----

== Key Takeaways

* **Self-Service** - Developers provision apps without tickets
* **Governance** - Ops defines templates with security baked in
* **Standardization** - Golden paths ensure consistency
* **Visibility** - Catalog shows everything in one place
* **Reduced Toil** - Automation eliminates manual provisioning
* **Operator-Managed** - RHDH Operator handles deployment lifecycle

== Going Further: Platform Engineering

This module showed you **RHDH basics from an Ops perspective**.

**A full RHDH implementation includes:**

- Software templates with multi-step workflows
- Git integration (GitHub, GitLab)
- CI/CD integration (Tekton, ArgoCD)
- SSO authentication (OIDC, SAML)
- Custom plugins for your organization
- Populated software catalog
- TechDocs for documentation

**Interested in a deep-dive?** Ask your instructor about the **Platform Engineering with RHDH Workshop**.
