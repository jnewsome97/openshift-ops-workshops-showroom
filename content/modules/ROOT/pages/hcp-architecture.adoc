= Advanced Architecture - Hosted Control Planes (HCP)

[NOTE]
====
**Module Status:** NEW CONTENT REQUIRED

This module needs to be created for the OpenShift Days 101 Ops Track.
Target version: OCP 4.20+ with HCP
====

== Module Overview

**Duration:** 20-25 minutes +
**Format:** Presentation + Demo (Hybrid Cloud Console) +
**Audience:** Infrastructure Architects, IT Directors

== Learning Objectives

By the end of this module, participants will understand:

* What Hosted Control Planes are and why they matter
* Cost and efficiency benefits of HCP architecture
* When to use HCP vs. traditional clusters
* How to provision an HCP cluster

== Content Outline

=== Part 1: Traditional Cluster Architecture Review (5 mins)

==== Standard IPI Deployment
* 3 master nodes (control plane)
* N worker nodes (workloads)
* Control plane overhead: 3 VMs always running

==== The Cost Problem
* Small dev/test clusters waste resources
* 3 masters for 2 workers = 60% overhead
* Every cluster needs dedicated control plane infrastructure

=== Part 2: Hosted Control Planes Explained (10 mins)

==== What is HCP?
* Control plane runs as pods in a "management cluster"
* Worker nodes are separate - your actual workload infrastructure
* Multiple hosted clusters share management infrastructure

==== Architecture Benefits

**Cost Efficiency:**
* Eliminate dedicated master nodes
* Control planes are just pods - much lighter weight
* Share infrastructure across multiple clusters

**Operational Speed:**
* Cluster creation: ~10 minutes (vs 40+ minutes traditional)
* No waiting for master nodes to provision
* Faster upgrades (control plane is just pod replacement)

**Multi-tenancy:**
* Run hundreds of hosted clusters on same management infrastructure
* Perfect for multi-tenant platforms

=== Part 3: Use Cases (5 mins)

**When to use HCP:**
* Dev/Test environments
* Edge deployments (many small clusters)
* Multi-tenant platforms
* Cost-sensitive workloads

**When to use Traditional:**
* Production critical workloads (isolated control plane)
* Air-gapped environments
* Regulatory requirements for dedicated infrastructure

=== Part 4: Demo - Provision HCP Cluster (10 mins)

**Demo Flow:**

1. Log into https://console.redhat.com/openshift[Red Hat Hybrid Cloud Console]

2. Navigate to Clusters â†’ Create Cluster

3. Select "Hosted Control Plane" option

4. Compare resource requirements:
   * Traditional: 3 m5.xlarge masters + N workers
   * HCP: 0 dedicated masters + N workers

5. Walk through creation wizard (stop before actual creation unless pre-canned)

6. Show estimated cost savings

**Key Talking Points:**
* Notice the reduced infrastructure requirements
* Point out faster provisioning time
* Highlight cost savings calculator

== Resources Required

* [ ] Red Hat Hybrid Cloud Console access
* [ ] AWS credentials for demo (or pre-recorded video)
* [ ] HCP architecture diagrams
* [ ] Cost comparison calculator/spreadsheet

== Lab Exercise (Optional)

If time permits and environment allows:

[source,bash,role="execute"]
----
# Create HCP cluster via CLI (requires hypershift operator)
hypershift create cluster aws \
  --name ops-track-hcp \
  --node-pool-replicas=2 \
  --base-domain=example.com \
  --pull-secret=/path/to/pull-secret
----

Monitor cluster creation:
[source,bash,role="execute"]
----
oc get hostedclusters -n clusters
oc get nodepools -n clusters
----

== Development Notes

**References:**
* https://docs.openshift.com/container-platform/4.20/hosted_control_planes/index.html
* https://hypershift-docs.netlify.app/

**Key Messages:**
* HCP = Modern cloud-native architecture
* Massive cost savings for multi-cluster scenarios
* Faster operations (provision, upgrade, scale)

**Required Assets:**
* Need to coordinate with RHDP for demo environment with HCP enabled
* Consider recording demo video as backup
